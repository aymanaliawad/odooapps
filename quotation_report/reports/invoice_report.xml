<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <template id="invoice_report">
        <t t-call="web.html_container">
            <t t-as="o" t-foreach="docs">
                <div t-attf-class="article" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id"
                     t-att-data-oe-lang="o and o.env.context.get('lang')">
                    <div class="page">
                        <header>
                            <t t-if="o.company_id.invoice_header">
                                <img style="width:100%;z-index:800;" t-att-src="'data:image/png;base64,%s' % to_text(o.company_id.invoice_header)"/>
                            </t>
                        </header>
                        <br/>
                        <style>
                            table {
                            font-family: arial, sans-serif;
                            border: 1px solid black;
                            border-collapse: collapse;
                            width: 100%;
                            }

                            tr:nth-child(even) {
                            background-color: #dddddd;

                            }
                            td,th,tr{
                            border: 1px solid black;
                            padding: 8px;

                            }
                        </style>

                        <table>
                            <tr style="width:100%; text-align: center; background-color:#7e9cce;">
                                <td rowspan="4" style="width:30%; background-color:#FFFFFF;">
                                    <span>
                                        <img t-if="o.get_qr_code()"
                                             style="width:35%;"
                                             t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s'%('QR', o.get_qr_code(), 100, 100)"/>
                                    </span>
                                </td>
                                <td style="width:20%;" ><span style="color:#ffffff;">   نوع الفاتورة</span></td>
                                <td style="width:20%;" ><span style="color:#ffffff;">رقم الفاتورة</span></td>
                                <td style="width:30%;" ><span style="color:#ffffff;">تاريخ الفاتورة</span></td>
                            </tr>

                            <tr style="width:100%; text-align: center; background-color:#7e9cce;">
                                <td style="width:20%;" ><span style="color:#ffffff;"> Invoice Type </span></td>
                                <td style="width:20%;" ><span style="color:#ffffff;"> Invoice No </span></td>
                                <td style="width:30%;" ><span style="color:#ffffff;"> Invoice Date </span></td>
                            </tr>

                            <tr style="width:100%;">
                                <td style="width:10%;text-align: center;" ><span t-esc="o.move_type"/></td>
                                <td style="width:10%;text-align: center;" ><span t-esc="o.name"/></td>
                                <td style="width:10%;text-align: center;" ><span t-field="o.invoice_date"  t-field-options = '{"format": "Mdy"}'/></td>
                            </tr>


                        </table>




                        <table>
                            <tr style="width:100%; text-align: center; background-color:#7e9cce;">
                                <td style="width:10%;" ><span style="color:#ffffff;">البريد الالكتروني</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;">   الجوال</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;"> مندوب مبيعات</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;"> الرقم الضريبي للشركة</span></td>
                            </tr>

                            <tr style="width:100%; text-align: center; background-color:#7e9cce;">
                                <td style="width:10%;" ><span style="color:#ffffff;"> Email </span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;"> Mobile Number </span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;"> Sales Person </span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;"> Company Vat </span></td>
                            </tr>

                            <tr style="width:100%;">
                                <td style="width:10%;text-align: center;" ><span t-esc="o.company_id.email"/></td>
                                <td style="width:10%;text-align: center;" ><span t-esc="o.company_id.mobile"/></td>
                                <td style="width:10%;text-align: center;" ><span t-esc="o.invoice_user_id.name"/></td>
                                <td style="width:10%;text-align: center;" ><span t-esc="o.company_id.vat"/></td>
                            </tr>


                        </table>
                        <table>
                            <tr style="width:100%; text-align: center; background-color:#7e9cce;">
                                <td style="width:10%;" ><span style="color:#ffffff;">رقم العرض</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;">الرقم الضريبي</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;">رقم الجوال</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;">إسم العميل</span></td>
                            </tr>

                            <tr style="width:100%; text-align: center; background-color:#7e9cce;">
                                <td style="width:10%;" ><span style="color:#ffffff;"> Source Doc </span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;"> Customer Vat </span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;"> Mobile Number </span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;"> Customer Name </span></td>
                            </tr>

                            <tr style="width:100%;">
                                <td style="width:10%;text-align: center;" ><span t-esc="o.invoice_origin"/></td>
                                <td style="width:10%;text-align: center;" ><span t-esc="o.partner_id.vat"/></td>
                                <td style="width:10%;text-align: center;" ><span t-esc="o.partner_id.mobile"/></td>
                                <td style="width:10%;text-align: center;" ><span t-esc="o.partner_id.name"/></td>
                            </tr>


                        </table>
                        <br/>
                        <t t-set="subtotal" t-value="0"/>
                        <t t-set="discount" t-value="0"/>


                        <table>
                            <tr style="width:100%; text-align: center; background-color:#7e9cce;">
                                <td style="width:10%;" ><span style="color:#ffffff;">المجموع</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;">الضريبة</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;">سعر الوحدة</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;">الكمية</span></td>
                                <td style="width:30%;" ><span style="color:#ffffff;">البيانات</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;">رقم الصنف</span></td>
                            </tr>

                            <tr style="width:100%; text-align: center; background-color:#7e9cce;">
                                <td style="width:10%;" ><span style="color:#ffffff;">Total</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;">Vat</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;">Unit Price</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;">Quantity</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;">Discription</span></td>
                                <td style="width:10%;" ><span style="color:#ffffff;">Item No</span></td>

                            </tr>

                            <t t-foreach="o.invoice_line_ids" t-as="line">
                                <tr>
                                    <t t-if="line.display_type == 'line_section'">
                                        <td colspan="7" style="color:#000000;background-color:#ffffcc;text-align: center;">
                                            <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                        </td>
                                    </t>
                                    <t t-else="">

                                        <t t-set="discount" t-value="discount + line.discount "/>
                                        <t t-set="subtotal" t-value="subtotal+ line.price_subtotal"/>
                                        <td style="width:10%;text-align: center;" ><span t-esc="line.price_subtotal"/></td>
                                        <td style="width:10%;text-align: center;" ><span t-esc="line.l10n_ae_vat_amount"/></td>
                                        <td style="width:10%;text-align: center;" ><span t-esc="line.price_unit"/></td>
                                        <td style="width:10%;text-align: center;" ><span t-esc="line.quantity"/></td>
                                        <td style="width:40%;text-align: center;" ><span t-esc="line.name"/></td>
                                        <td style="width:20%;text-align: center;" ><span t-esc="line.product_id.default_code"/></td>
                                    </t>

                                </tr>
                            </t>
                        </table>
                        <br/>
                        <table>
                            <tr style="width:100%; ">
                                <td style="width:10%; text-align: center;background-color:#7e9cce" ><span t-esc="subtotal" /></td>
                                <td style="width:10%; text-align: center;background-color:#7e9cce" ><span> Total - المجموع </span></td>
                                <td rowspan="4" style="width:10%; text-align: center;" ><span t-esc="narration"/></td>
                                <td rowspan="4" style="width:10%; text-align: center;" ><span> ﻣﻼﺣﻈـﺎت</span></td>
                            </tr>
                            <tr style="width:100%;">
                                <td style="width:10%; text-align: center;background-color:#ffffff" ><span t-esc="discount" /></td>
                                <td style="width:10%; text-align: center;background-color:#ffffff" ><span> Disc - تخفيض </span></td>
                            </tr>
                            <tr style="width:100%;">
                                <td style="width:10%; text-align: center;" ><span t-esc="o.amount_tax" /></td>
                                <td style="width:10%; text-align: center;" ><span> VAT - ضريبة القيمة المضافة</span></td>
                            </tr>
                            <tr style="width:100%;">
                                <td style="width:10%;text-align: center;background-color:#7e9cce " ><span t-esc="o.amount_total" /></td>
                                <td style="width:10%; text-align: center;background-color:#7e9cce"  ><span> Total With VAT - إجمالي مع ضريبة القيمة المضافة</span></td>

                            </tr>
                        </table>
                        <table>
                            <tr style="width:100%; ">
                                <td style="width:50%; text-align: center;"><span>
                                    Return will be accepted during seven days only from of the invoice date
                                    with the original invoice and product must be with original condition
                                </span></td>
                                <td style="width:50%; text-align: center;">
                                    <span>ﺳﻴﺘﻢ ﻗﺒﻮل اﻻﺳﺘﺮﺟﺎع ﺧﻼل ﺳﺒﻌﺔ أﻳﺎم ﻓﻘﻂ ﻣﻦ ﺗﺎرﻳخ اﻟﻔﺎﺗﻮرة ﻣﻊ إﺣﻀﺎر أﺻﻞ اﻟﻔﺎﺗﻮرة وﻳﻜﻮن اﻟﻤﻨﺘﺞ ﺑﺤﺎﻟﺘﻪ اﻷﺻﻠﻴﺔ</span>
                                </td>
                            </tr>
                        </table>

                        <div style="width:1000px;position:absolute;top:1320px; page-break-inside: avoid;">

                            <t t-if="docs.company_id.quotation_footer">
                                <img style="width:100%;z-index:800;"
                                     t-att-src="'data:image/png;base64,%s' % to_text(docs.company_id.quotation_footer)"/>
                            </t>
                        </div>

                        <div style="page-break-before: always;">
                        </div>

                        <header style="margin-top: 0px;" >
                            <t t-if="o.company_id.invoice_header" >
                                <img style="width:100%;z-index:800;"
                                     t-att-src="'data:image/png;base64,%s' % to_text(o.company_id.invoice_header)"/>
                            </t>
                        </header>
                        <br/>

                        <table style="border: none;">

                            <tr style="width:100%;border: none;">
                                <td style="width:50%;border: none;text-align: center;">ﺗـﻢ اﻻﻋﺘﻤــﺎد ﺑـﻮاﺳﻄـﺔ<br/>Approved By<br/>
                                    <span t-esc="o.create_uid.name"/>
                                </td>
                                <td style="width:50%;border: none;text-align: center;">اﻧﺸــﺊ ﺑـﻮاﺳﻄﺔ <br/>Created By<br/>
                                    <span t-esc="o.create_uid.name"/>
                                </td>
                            </tr>
                        </table>

                        <div style="width:1000px;position:absolute;top:2800px; page-break-inside: avoid;">
                            <!--<footer style="width:1000px;margin-left:-30px;">-->
                            <t t-if="docs.company_id.quotation_footer">
                                <img style="width:100%;z-index:800;"
                                     t-att-src="'data:image/png;base64,%s' % to_text(docs.company_id.quotation_footer)"/>
                            </t>
                            <!--</footer>-->
                        </div>







                    </div>
                </div>
            </t>
        </t>
    </template>












    <record id="invoice_paper_format" model="report.paperformat">
        <field name="name">Quotation Report</field>
        <field name="default" eval="True" />
        <field name="format">A4</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">5</field>
        <field name="margin_bottom">0</field>
        <field name="margin_left">5</field>
        <field name="margin_right">5</field>
        <field name="header_line" eval="False" />
        <field name="header_spacing">0</field>
        <field name="dpi">90</field>
    </record>

    <report id="quotation_report_new"
            model="account.move"
            string="Invoice Report"
            report_type="qweb-pdf"
            name="quotation_report.invoice_report"
            file="quotation_report.invoice_report"
            paperformat="invoice_paper_format"/>

</odoo>
